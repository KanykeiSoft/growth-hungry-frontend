/* =========================
   CHAT — SHARED STYLES
   Works for Section Chat (right panel)
   ========================= */

/* Палитра */
:root {
  --bg-page: #f3ede6;
  --text: #3b2f2f;
  --muted: #7c7068;

  --card-bg: #ffffff;
  --card-br: #e7e1d9;
  --shadow: 0 8px 20px rgba(0,0,0,.05);

  --line: #e7e1d9;

  --bubble-user-bg: #fff7ee;
  --bubble-user-br: #e9d8c9;

  --bubble-bot-bg: #f7f3ed;
  --bubble-bot-br: #e7dfd4;

  --input-bg: #ffffff;
  --input-br: #d9d3cc;

  --btn-bg: linear-gradient(180deg,#c69c6d,#a47848);
  --btn-br: #a47848;
  --btn-fg: #ffffff;
}

/* =========================
   Chat root (IMPORTANT)
   ========================= */
.chat-interface {
  height: 100%;
  display: flex;
  flex-direction: column;
  min-height: 0; /* CRITICAL */
  background: var(--card-bg);
}

/* =========================
   Messages area
   ========================= */
.messages-area {
  flex: 1 1 auto;
  min-height: 0;        /* CRITICAL */
  overflow-y: auto;     /* scroll only here */
  padding: 16px;
}

/* empty state */
.empty-placeholder {
  text-align: center;
  color: var(--muted);
  margin-top: 40px;
}

.empty-placeholder h3 {
  margin-bottom: 6px;
}

/* =========================
   Message rows
   ========================= */
.msg-row {
  display: flex;
  margin-bottom: 10px;
}

.msg-user {
  justify-content: flex-end;
}

.msg-ai {
  justify-content: flex-start;
}

/* =========================
   Message bubble
   ========================= */
.msg-bubble {
  max-width: 85%;
  padding: 10px 12px;
  border-radius: 12px;
  background: var(--bubble-bot-bg);
  border: 1px solid var(--bubble-bot-br);
  color: var(--text);
  line-height: 1.45;

  white-space: pre-wrap;
  word-break: break-word;
  overflow-wrap: anywhere;
}

.msg-user .msg-bubble {
  background: var(--bubble-user-bg);
  border-color: var(--bubble-user-br);
}

/* markdown inside bubble */
.markdown p {
  margin: 0 0 6px;
}

.markdown p:last-child {
  margin-bottom: 0;
}

/* =========================
   Loading / error
   ========================= */
.loading-spinner {
  text-align: center;
  color: var(--muted);
  padding: 10px;
}

.chat-error {
  color: #7f1d1d;
  background: rgba(239,68,68,.08);
  border: 1px solid rgba(239,68,68,.35);
  border-radius: 10px;
  padding: 8px 10px;
  margin: 8px 12px;
}

/* =========================
   Input area (BOTTOM)
   ========================= */
.input-area {
  flex: 0 0 auto;
  display: flex;
  gap: 10px;
  padding: 12px;
  border-top: 1px solid var(--line);
  background: var(--card-bg);
}

.input-area input {
  flex: 1;
  height: 44px;
  padding: 0 12px;
  border-radius: 10px;
  border: 1px solid var(--input-br);
  background: var(--input-bg);
  outline: none;
  font-size: 14px;
}

.input-area input:disabled {
  background: #f5f5f5;
}

.input-area button {
  height: 44px;
  padding: 0 14px;
  border-radius: 10px;
  border: 1px solid var(--btn-br);
  background: var(--btn-bg);
  color: var(--btn-fg);
  font-weight: 600;
  cursor: pointer;
}

.input-area button:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}
